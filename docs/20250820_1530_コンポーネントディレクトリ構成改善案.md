# コンポーネントディレクトリ構成改善案

## 現在の構成の問題点

### 1. features配下の分類が不明確
- `political-organization/` - 政治組織固有のコンポーネント
- `summary/` - サマリー系コンポーネント
- `sankey/` - Sankeyチャート関連
- `transaction/` - 取引関連

### 2. ui配下の責務が混在
- `BaseCard.tsx` - 基本UIコンポーネント（適切）
- `CardSummary.tsx`, `FinancialSummary.tsx` - ビジネスロジック含む（不適切）
- `ListIcon.tsx` - アイコンコンポーネント（適切）

### 3. 命名規則の不統一
- Section系とCard系が混在
- 一部のコンポーネントが機能別に分類されていない

## 改善案

### 新しいディレクトリ構成

### オプション1: ui/common統合案

```
webapp/src/client/components/
├── ui/                           # 共通UIコンポーネント（基本UI + プロジェクト共通）
│   ├── BaseCard.tsx             # 基本カード
│   ├── Button.tsx               # 基本ボタン
│   ├── Input.tsx                # 基本入力
│   ├── Icon.tsx                 # アイコン
│   ├── CardSummary.tsx          # プロジェクト固有サマリーカード
│   ├── FinancialSummary.tsx     # 金融サマリー
│   └── ...
├── layout/                       # レイアウト関連
│   ├── Header.tsx
│   ├── Footer.tsx
│   ├── MainColumn.tsx
│   ├── MainColumnCard.tsx
│   └── CardHeader.tsx
├── organization-page/            # 政治組織詳細ページ専用セクション
│   ├── CashFlowSection.tsx
│   ├── MonthlyTrendsSection.tsx
│   ├── DonationSummarySection.tsx
│   ├── TransactionsSection.tsx
│   ├── ExplanationSection.tsx
│   └── components/               # セクション内で使用される子コンポーネント
│       ├── TransactionTable.tsx
│       ├── TransactionTableRow.tsx
│       └── SankeyChart.tsx
└── summary/                      # サマリー系（複数ページで使用）
    ├── FinancialSummaryCard.tsx
    ├── FinancialSummarySection.tsx
    └── ...
```

### オプション2: ui/common分離案

```
webapp/src/client/components/
├── ui/                           # 純粋UIコンポーネント（他プロジェクトでも使用可能）
│   ├── BaseCard.tsx
│   ├── Button.tsx
│   ├── Input.tsx
│   ├── Icon.tsx
│   └── ...
├── common/                       # プロジェクト共通コンポーネント
│   ├── CardSummary.tsx
│   ├── FinancialSummary.tsx
│   └── ...
├── layout/                       # レイアウト関連
│   └── ...
├── organization-page/            # 政治組織詳細ページ専用
│   └── ...
└── summary/                      # サマリー系
    └── ...
```

## 移行作業

### Phase 1: organization-page ディレクトリ作成
1. `organization-page/` と `organization-page/components/` ディレクトリ作成
2. 政治組織詳細ページのセクションコンポーネントを移動
   - `CashFlowSection.tsx`
   - `MonthlyTrendsSection.tsx` 
   - `DonationSummarySection.tsx`
   - `TransactionsSection.tsx`
   - `ExplanationSection.tsx`

### Phase 2: 子コンポーネントの整理
1. セクション専用の子コンポーネントを `organization-page/components/` に移動
   - `TransactionTable.tsx`
   - `TransactionTableRow.tsx`
   - `SankeyChart.tsx`

### Phase 3: ui/common ディレクトリの整理
**オプション1採用の場合:**
1. `ui/` 配下に `CardSummary.tsx`, `FinancialSummary.tsx` を保持
2. 基本UIコンポーネントとプロジェクト固有コンポーネントを同じディレクトリで管理

**オプション2採用の場合:**
1. `CardSummary.tsx`, `FinancialSummary.tsx` を `common/` に移動
2. `ui/` は純粋な汎用UIコンポーネントのみ

### Phase 4: import文の修正
1. 移動したコンポーネントのimport文を一括修正
2. 特に `[slug]/page.tsx` のimport文を更新

## メリット

### 1. 明確なページ単位での整理
- 政治組織詳細ページのすべてのセクションが1ディレクトリに集約
- ページレベルでの関連コンポーネントを素早く発見可能

### 2. 階層化された構造
- セクションレベルとコンポーネントレベルを明確に分離
- `organization-page/components/` で子コンポーネントを整理

### 3. 再利用性の考慮
**オプション1の場合:**
- ページ固有: `organization-page/`
- 複数ページ共通: `summary/`
- 共通UI: `ui/` (基本UI + プロジェクト固有)

**オプション2の場合:**
- ページ固有: `organization-page/`
- 複数ページ共通: `summary/`
- プロジェクト共通: `common/`
- 汎用UI: `ui/`

## 推奨案

**オプション1（ui/common統合）を推奨** 

理由:
- このプロジェクトは単一アプリケーションのため、純粋な汎用UIと分離する必要性が低い
- ディレクトリ数が減り、開発者の認知負荷が軽減
- import文が `@/client/components/ui/` に統一され、シンプル
- 将来的に他プロジェクトで再利用したいコンポーネントがあれば、その時点で分離を検討

### 4. 開発・保守効率向上
- 政治組織ページの修正時に関連ファイルが見つけやすい
- 新しいセクション追加時の配置場所が明確
- import文がページ単位で統一される

## 実装時の注意点

1. **一度に移行しない**: Phase分けして段階的に実施
2. **TypeScript型エラー対応**: import文変更に伴う型エラーを適切に処理
3. **テスト実行**: 移行後に動作確認を実施
4. **チーム共有**: 新しいディレクトリ構成をチームで共有